# Задача о коммивояжере (Генетический алгоритм). Вариант 3.

## Задача:

Для условий 3 варианта задания 12:
1. Сгенерировать 2 особи (случайных решения) в виде перестановки номеров городов, которая всегда начинается с единицы.
2. Рассчитать фитнес-функцию для особей.
3. Закодировать их с применением альтернативной кодировки с пошаговыми комментариями.
4. Провести равномерное скрещивание особей с пошаговыми комментариями, получить два потомка.
5. Провести мутацию одного из потомков с пошаговыми комментариями.
6. Декодировать альтернативную кодировку потомков в натуральную кодировку с пошаговыми комментариями.
7. Рассчитать фитнес-функцию для потомков.

## Исходные данные:

Матрица расстояний:

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **1** | **∞** |  13   |   9   |  12   |  13   |
| **2** |  11   | **∞** |  10   |  15   |   7   |
| **3** |   7   |  14   | **∞** |   8   |  15   |
| **4** |  14   |  15   |  12   | **∞** |   8   |
| **5** |   8   |  15   |   9   |  10   | **∞** |

# Решение:

Сгенерируем 2 особи (случайных решения) в виде перестановки номеров городов, которая всегда начинается с единицы.

1 особь: 13542

2 особь: 14253

Рассчитаем фитнес функции для особей. Для этого сложим длины от города до города:

Фитнес функция 1 особи: 9 + 15 + 10 + 15  + 11 = 60

Фитнес функция 2 особи: 12 + 15 + 7 + 9 + 7 = 50

## Закодируем особей с применением альтернативной кодировки: 

### Натуральный код особи x<sub>1</sub>: 13542

| x1                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| натуральный код                  | 1 | 3 | 5 | 4 | 2 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Альтернативный код: 1

| x1                               |   |   |   |   |  
|----------------------------------|---|---|---|---|
| натуральный код                  | 3 | 5 | 4 | 2 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Альтернативный код: 12

| x1                               |   |   |   |  
|----------------------------------|---|---|---|
| натуральный код                  | 5 | 4 | 2 |
| возрастающая перестановка        | 2 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 |

Альтернативный код: 123

| x1                               |   |   |    
|----------------------------------|---|---|
| натуральный код                  | 4 | 2 |
| возрастающая перестановка        | 2 | 4 |
| номера возрастающей перестановки | 1 | 2 |

Альтернативный код: 1232

| x1                               |    |  
|----------------------------------|----|
| натуральный код                  | 2  |
| возрастающая перестановка        | 2  |
| номера возрастающей перестановки | 1  |

Альтернативный код особи x<sub>1</sub>: 12321

### Натуральный код особи x<sub>2</sub>: 14253

| x1                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| натуральный код                  | 1 | 4 | 2 | 5 | 3 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Альтернативный код: 1

| x1                               |   |   |   |   |  
|----------------------------------|---|---|---|---|
| натуральный код                  | 4 | 2 | 5 | 3 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Альтернативный код: 13

| x1                               |   |   |   |  
|----------------------------------|---|---|---|
| натуральный код                  | 2 | 5 | 3 |
| возрастающая перестановка        | 2 | 3 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 |

Альтернативный код: 131

| x1                               |   |   |    
|----------------------------------|---|---|
| натуральный код                  | 5 | 3 |
| возрастающая перестановка        | 3 | 5 |
| номера возрастающей перестановки | 1 | 2 |

Альтернативный код: 1312

| x1                               |    |  
|----------------------------------|----|
| натуральный код                  | 3  |
| возрастающая перестановка        | 3  |
| номера возрастающей перестановки | 1  |

Альтернативный код особи x<sub>2</sub>: 13121

### Таким образом получили альтернативные коды двух особей: 

Альтернативный код особи x<sub>1</sub>: 12321

Альтернативный код особи x<sub>2</sub>: 13121

### Проведем равномерное скрещивание особей и получим два потомка.

Каждый родитель разбивается на две части, которые затем комбинируются для получения потомков. Для этого случайным образом определим точку разреза хромосомы, после чего соответствующие части поменяем местами. В результате получим две новые хромосомы для двух потомков.

Ниже разобьем родителей на две части и скомбинируем их:

(12|321)

(13|121)

### Получим двух потомков: 

x<sub>3</sub>: 12121

x<sub>4</sub>: 13321

### Проведем мутацию одного из потомков:

Проведем мутацию 3 потомка. Мутация односимвольная. Мы можем заменить любой символ на любой символ множества {1; n-i}, где n - длина кода, i - номер символа.

Заменим в 3 потомке 3 ген с 1 -> 2

Таким образом альтернативные коды потомков будут выглядеть следующим образом: 

x<sub>3</sub>: 12221

x<sub>4</sub>: 13321

### Декодируем альтернативную кодировку потомков в натуральную кодировку.

### Альтернативный код: 12221

| x1                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| альтернативный код               | 1 | 2 | 2 | 2 | 1 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Натуральный код: 1

| x1                               |   |   |   |   |
|----------------------------------|---|---|---|---|
| альтернативный код               | 2 | 2 | 2 | 1 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Натуральный код: 13

| x1                               |   |   |    | 
|----------------------------------|---|---|----|
| альтернативный код               | 2 | 2 | 1  |
| возрастающая перестановка        | 2 | 4 | 5  |
| номера возрастающей перестановки | 1 | 2 | 3  |

Натуральный код: 134

| x1                               |     |   |
|----------------------------------|-----|---|
| альтернативный код               | 2   | 1 |
| возрастающая перестановка        | 2   | 5 |
| номера возрастающей перестановки | 1   | 2 |

Натуральный код: 1345

| x1                               |    | 
|----------------------------------|----|
| альтернативный код               | 1  |
| возрастающая перестановка        | 2  |
| номера возрастающей перестановки | 1  |

Натуральный код: 13452

### Альтернативный код: 13321

| x1                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| альтернативный код               | 1 | 3 | 3 | 2 | 1 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Натуральный код: 1

| x1                               |   |   |   |   |
|----------------------------------|---|---|---|---|
| альтернативный код               | 3 | 3 | 2 | 1 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Натуральный код: 14

| x1                               |   |   |    | 
|----------------------------------|---|---|----|
| альтернативный код               | 3 | 2 | 1  |
| возрастающая перестановка        | 2 | 3 | 5  |
| номера возрастающей перестановки | 1 | 2 | 3  |

Натуральный код: 145

| x1                               |     |   |
|----------------------------------|-----|---|
| альтернативный код               | 2   | 1 |
| возрастающая перестановка        | 2   | 3 |
| номера возрастающей перестановки | 1   | 2 |

Натуральный код: 1453

| x1                               |    | 
|----------------------------------|----|
| альтернативный код               | 1  |
| возрастающая перестановка        | 2  |
| номера возрастающей перестановки | 1  |

Натуральный код: 14532

### Рассчитаем фитнес-функцию для потомков:

Получились потомки: 

x<sub>3</sub>: 13452

x<sub>4</sub>: 14532

Рассчитаем фитнес функции для особей. Для этого сложим длины от города до города:

Фитнес функция x<sub>3</sub>: 9 + 8 + 8 + 15 + 11 = 51

Фитнес функция x<sub>4</sub>: 12 + 8 + 9 + 14 + 11 = 54

Таким образом кратчайшее расстояние достигается при 2 особи: 

Путь: 1 -> 4 -> 2 -> 5 -> 3 -> 1

Длина маршрута: 50

## Ответ: 

Самая сильная особь - 2. 

Путь: 1 -> 4 -> 2 -> 5 -> 3 -> 1

Длина маршрута = 50

