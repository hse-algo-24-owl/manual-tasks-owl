# Задание №14
# Транспортная задача (Максимальный поток минимальной стоимости). Вариант 5.
## Условиe задачи
Два завода имеют производительность 8 и 9, а два складских помещения имеют вместимость 6 и 7. Матрица затрат на перевозку одной единицы товара (строки – это заводы, столбцы – это склады) имеет вид:

$$
 \begin{pmatrix}    
  8 & 5 \\ 
  3 & 4 \\ 
 \end{pmatrix}    
$$

Требуется:
1. Найти стоимость перевозки с первого завода на первый склад 6 единиц товара, а со второго завода на второй склад 7 единиц товара;
2. Используя алгоритм поиска максимального потока минимальной стоимости, скорректировать указанный выше вариант перевозки товаров, так чтобы объём перевозимых товаров не изменился, а стоимость их перевозки стала минимальной.
## Решение
### Задача 1.
Затраты на перевозку одного товара с первого завода на первый склад – **8**. Затраты на перевозку одного товара со второго завода на второй склад – **4**.

Перемножаем затраты на количество (согласно номеру завода) товаров:

$$8 × 6 + 7 × 4 = 76$$

**64** – ответ на первую задачу.
### Задача 2.
Построим транспортную сеть. Добавим исток S и сток t, где оба стока будут вспосогательными, для того, чтобы транспортная сеть просто существовала.

Обозначим завод 1 – буквой A, завод 2 – буквой B; склад 1 – I, склад 2 – II. Воспользуяюсь условием задания и задачей №1, построим транспортную сеть и укажем локальные потоки и пропускнуе способности дуг.

Завод A имеет производительность **8**, завод B имеет производительность **9**, склад I имеет вместимость **6**, склад II имеет вместимость **7**.
```mermaid
graph LR
    S-->|6, 8|A
    S-->|7, 9|B
    A-->|6, 6|I
    A-->|0, 7|II
    B-->|0, 6|I
    B-->|7, 7|II
    I-->|6, 6|t
    II-->|7, 7|t
```
#### Строим остаточную сеть
```mermaid
graph LR
    S-->|6|A
    A-.->|2|S
    S-->|7|B
    B-.->|2|S
    A-->|6|I
    II-.->|7|A
    I-.->|6|B
    B-->|7|II
    I-->|6|t
    II-->|7|t
```
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.
```mermaid
graph LR
    S-->|-0|A
    A-.->|+0|S
    S-->|-0|B
    B-.->|+0|S
    A-->|-8|I
    II-.->|+5|A
    I-.->|+3|B
    B-->|-4|II
    I-->|-0|t
    II-->|-0|t
```
В остаточной сети найден ориентированный цикл отрицательной стоимости A -> I -> B -> II -> A (-8 +3 -4 + 5 = -4)

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.
```mermaid
graph LR
    S-->|6|A
    A-.->|2|S
    S-->|7|B
    B-.->|2|S
    A-->|6|I
    II-.->|7|A
    I-.->|6|B
    B-->|7|II
    I-->|6|t
    II-->|7|t
``` 
Минимальный вес ребра в цикле – 6 – это неиспользованный резерв ребра I -> B и задействованный поток A -> I.

Удалим найденный цикл - уменьшим на 6 вес всех ребер, входящих в цикл.
```mermaid
graph LR
    S-->|6|A
    A-.->|2|S
    S-->|7|B
    B-.->|2|S
    I-.->|6|A
    II-.->|1|A
    A-->|6|II
    B-->|6|I
    B-->|1|II
    II-.->|6|B
    I-->|6|t
    II-->|7|t
``` 
Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.
```mermaid
graph LR
    S-->|-0|A
    A-.->|+0|S
    S-->|-0|B
    B-.->|+0|S
    I-.->|+8|A
    II-.->|+5|A
    A-->|-5|II
    B-->|-3|I
    B-->|-4|II
    II-.->|+4|B
    I-->|-0|t
    II-->|-0|t
``` 
В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

```mermaid
graph LR
    S-->|6, 8|A
    S-->|7, 9|B
    A-->|0, 6|I
    A-->|6, 7|II
    B-->|6, 6|I
    B-->|1, 7|II
    I-->|6, 6|t
    II-->|7, 7|t
```

Посчитаем текущую стоимость:
A -> II: идет 6 ед. товара, по стоимости 6 * 5 = 30.
B -> I: идет 6 ед. товара, по стоимости 6 * 3 = 18.
B -> II: идет 1 ед. товара, по стоимости 1 * 4 = 4.

Сумма: 30 + 18 + 4 = 52.

**52** – ответ на задачу №2.

## Ответ
1. Стоимость без корректировки – 76
2. Стоимость после корректирвоки – 52. Отправиляем 6 ед. товара A -> II; 6 ед. товара B -> I; 1 ед. товара B -> II.