# Задание №14. Команда Second.
### Постановка задачи:
Задача о рюкзаке (англ. Knapsack problem) — дано N предметов, n<sub>i</sub> предмет имеет массу w<sub>i</sub> > 0 и стоимость p<sub>i</sub> > 0. Необходимо выбрать из этих предметов такой набор, чтобы суммарная масса не превосходила заданной величины W (вместимость рюкзака), а суммарная стоимость была максимальна. 

### Вариант 4: 
Транспортная задача

Два завода имеют производительность 6 и 7, а два складских помещения имеют вместимость 8 и 9. Матрица затрат на перевозку одной единицы товара (строки – это заводы, столбцы – это склады) имеет вид:

$$
 \begin{pmatrix}    
  5 & 8 \\ 
  4 & 6 \\ 
 \end{pmatrix}    
$$

Требуется:
1. Найти стоимость перевозки с первого завода на второй склад 6 единиц товара, а со второго завода на первый склад 7 единиц товара;
2. Используя алгоритм поиска максимального потока минимальной стоимости, скорректировать указанный выше вариант перевозки товаров, так чтобы объём перевозимых товаров не изменился, а стоимость их перевозки стала минимальной.

## Этап 1: Построим сеть с источником s, стоком t и указанными пропускными способностями дуг для поиска максимального потока.

```mermaid
graph LR
    s-->|"(6,6)"|A
    s-->|"(7,7)"|B
    A-->|"(0,6)"|I
    A-->|"(6,6)"|II
    B-->|"(7,7)"|I
    B-->|"(0,7)"|II
    I-->|"(7,8)"|t
    II-->|"(6,9)"|t
```

Получаем сеть при отправке 6 у.е. с завода А на 2 склад, 7 у.е. с завода B на 1 склад:

```mermaid
graph LR
    s-->|6|A
    s-->|7|B
    A-->|6|II
    B-->|7|I
    I-->|7|t
    II-->|6|t
```

Стоимость транспортировки: 6 * 8 + 7 * 4 = 76.

## Этап 2: Построим остаточные сети для пропускной способности и стоимости транспортировки. В случае со стоимостями прямые дуги будут со знаком "-", а обратные со знаком "+".

```mermaid
graph LR
    s-->|6|A
    s-->|7|B
    A-->|6|II
    II-.->|7|B
    B-->|7|I
    I-.->|6|A
    I-->|7|t
    t-.->|1|I
    II-->|6|t
    t-.->|3|II
```

```mermaid
graph LR
    s-->|0|A
    s-->|0|B
    A-->|-8|II
    II-.->|6|B
    B-->|-4|I
    I-.->|5|A
    I-->|0|t
    t-.->|0|I
    II-->|0|t
    t-.->|0|II
```

Выполним поиск цикла отрицательной стоимости. Найден следующий цикл:
B --> I --> A --> II --> B (- 4 + 5 - 8 + 6 = - 1). Минимальное значение = 6. Уменьшим вес дуг на найденном пути на величину равную минимуму.

```mermaid
graph LR
    s-->|6|A
    s-->|7|B
    II-.->|6|A
    A-->|6|I
    B-->|1|I
    I-.->|6|B
    B-->|6|II
    II-.->|1|B
    I-->|7|t
    t-.->|1|I
    II-->|6|t
    t-.->|3|II
```

## Этап 3: Выполним поиск цикла отрицательной стоимости. 

```mermaid
graph LR
    s-->|0|A
    s-->|0|B
    II-.->|8|A
    A-->|-5|I
    B-->|-4|I
    I-.->|4|B
    B-->|-6|II
    II-.->|6|B
    I-->|0|t
    t-.->|0|I
    II-->|0|t
    t-.->|0|II
```

Нет отрицательного цикла. Тогда итоговый граф будет иметь следующий вид:

```mermaid
graph LR
    s-->|"(6,6)"|A
    s-->|"(7,7)"|B
    A-->|"(6,6)"|I
    B-->|"(1,7)"|I
    B-->|"(6,7)"|II
    I-->|"(7,8)"|t
    II-->|"(6,9)"|t
```

Выполним расчёты итоговой стоимости перевозки:
A --> I ==> 6 * 5 = 30. 
B --> I и B --> II ==> 1 * 4 + 6 * 6 = 4 + 36 = 40. В сумме 70.

## Ответ:
Итоговая стоимость транспортировки выходит 70 за 13 единиц товара.