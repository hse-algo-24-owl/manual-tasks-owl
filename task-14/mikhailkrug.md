## Транспортная задача. Решение с использованием алгоритма поиска максимального потока минимальной стоимости.
### Вариант 10:

Два завода имеют производительность 8 и 8, а два складских помещения имеют вместимость 7 и 9. Матрица затрат на перевозку одной единицы товара (строки – это заводы, столбцы – это склады) имеет вид:

$$
 \begin{pmatrix}    
  6 & 5 \\ 
  3 & 4 \\ 
 \end{pmatrix}    
$$

Требуется:
1. Найти стоимость перевозки с первого завода на первый склад 7 единиц товара, на второй склад 1 единицы, а со второго завода на второй склад 8 единиц товара;
2. Используя алгоритм поиска максимального потока минимальной стоимости, скорректировать указанный выше вариант перевозки товаров, так чтобы объём перевозимых товаров не изменился, а стоимость их перевозки стала минимальной.
   
| Заводы/Cклады    |  I  |  II  | 
|:-------------|:---:|:---:|
| **A** |  6 |  5 |
| **B** |  3 |  4 |

### Шаг 1. 
Допустим, что с первого завода на первый склад 7 единиц товара и 1 на второй, а со второго завода на второй склад 8 единиц товара:
```mermaid
graph LR
    A-->|7|I
    A-->|1|II
```
```mermaid
graph LR
    B-->|0|I
    B-->|8|II
```

Стоимость перевозки при данном распределении равна **S**= (7 * 6) + (1 * 5) + (8 * 4) = **79** 

### Шаг 2.
Используем алгоритм поиска максимального потока минимальной стоимости.
1) Нарисуем полный двудольный граф, в левой доле которого 2 вершины (заводы A и B), а в правой - 2 вершины (слады I и II).

Добавим локальные потоки и стоимости за единицу товара по этому потоку.

Добавим источник **s**, сток **t**, а также по дуге из s к каждому заводу и по дуге от каждого склада до t. Стоимость этих дуг равна 0.

```mermaid
graph LR
    subgraph "Заводы"
        A[A]
        B[B]

    end
    subgraph "Склады"
        I[I]
        II[II]

    end
    s --- |8,0|A
    s --- |8,0|B
    A --- |7,6|I
    A --- |1,5|II
    B --- |0,3|I
    B --- |8,4|II
    I --- |7,0|t
    II --- |9,0|t
```
Максимальная величина потоков в сети **F=16**.

2) Построим остаточную сеть

Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока. Они отрицательны у всех дуг, направленных из левой доли в правую, и положительные для всех обратных дуг.

```mermaid
graph LR
    subgraph "Заводы"
        A[A]
        B[B]

    end
    subgraph "Склады"
        I[I]
        II[II]

    end
    s --> |0|A
    s --> |0|B
    A --> |-6|I
    A --> |-5|II
    B --> |-4|II
    I -.-> |6|A
    I -.-> |3|B
    II -.->|5|A
    II -.->|4|B
    I --> |0|t
    II --> |0|t
linkStyle 2 stroke:red;
linkStyle 6 stroke:red;
linkStyle 4 stroke:red;
linkStyle 7 stroke:red;
```
В построенной остаточной сети найден цикл отрицательной стоимости:
```mermaid
graph LR
A --> |-6|I --> |3|B --> |-4|II --> |5|А
```
Также обозначим веса ребер:
```mermaid
graph LR
A --> |7|I --> |8|B --> |8|II --> |7|А
```
Минимальный вес в цикле равен **7**. 

3) Удалим найденный цикл, уменьшив на **7** вес всех ребер, входящих в цикл.
```mermaid
graph LR
A --> |0|I --> |1|B --> |1|II --> |0|А
```
После снижения на 7 всех весов в цикле, удалим ребро A -> II, добавим дугу B -> I

```mermaid
graph LR
    subgraph "Заводы"
        A[A]
        B[B]

    end
    subgraph "Склады"
        I[I]
        II[II]

    end
    s --- |8,8|A
    s --- |8,8|B
    A --- |0,8|I
    B --- |7,8|I
    A --- |8,8|II
    B --- |1,8|II
    I --- |7,7|t
    II --- |9,9|t
  linkStyle 2 stroke:red;
  linkStyle 3 stroke:red;
  linkStyle 4 stroke:red;
  linkStyle 5 stroke:red;

```
Стоимость нового потока равна:
**S** = (7 * 3) + (1 * 4) + (8 * 5) = **65** 

### Ответ: 
Оптимальный вариант доставки продукции:
```mermaid
graph LR
    A-->|0|I
    A-->|8|II
```
```mermaid
graph LR
    B-->|7|I
    B-->|1|II
```
Затраты при таком способе распределения минимальны и составляют **65** (у.е.).
