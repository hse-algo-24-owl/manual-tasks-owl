# Задание №9
# Пропускная способность дуг сети: вариант 6
#### Пропускная способность дуг сети:

|          Дуги          | sa | sb | sc | ba | bc | cd | dt | ac | at |
|:----------------------:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность | 6  | 4  | 6  | 5  | 5  | 10 | 8  | 5  | 8  |

### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг.

```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    s-->|6|c
    b-->|5|a
    b-->|5|c
    c-->|10|d
    d-->|8|t
    a-->|5|c
    a-->|8|t
```

Построим остаточную сеть. Так как изначально поток в сети не задан, все дуги сети являются пустыми (локальный поток равен нулю), соответственно в остаточную сеть необходимо вынести обратную дугу с весом равным пропускной способности. 

```mermaid
graph LR
    a-.->|6|s
    b-.->|4|s
    c-.->|6|s
    a-.->|5|b
    c-.->|5|b
    d-.->|10|c
    t-.->|8|d
    c-.->|5|a
    t-.->|8|a
```

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> a -> s. Минимальный вес дуг на этом пути равен 6.
```mermaid
graph LR
    a-.->|6|s
    b-.->|4|s
    c-.->|6|s
    a-.->|5|b
    c-.->|5|b
    d-.->|10|c
    t-.->|8|d
    c-.->|5|a
    t-.->|8|a
    style a fill:#926EAE,stroke:#555,stroke-width:2px
    style t fill:#926EAE,stroke:#555,stroke-width:2px
    style s fill:#926EAE,stroke:#555,stroke-width:2px
```

Обновляем остаточную сеть:
a -> s : 0
t -> a : 2

```mermaid
graph LR
    
    s-->|6|a
    b-.->|4|s
    c-.->|6|s
    a-.->|5|b
    c-.->|5|b
    d-.->|10|c
    t-.->|8|d
    c-.->|5|a
    t-.->|2|a
    a-->|6|t

```


### 3. Продолжим поиск увеличивающего пути в остаточной сети



В остаточной сети найден увеличивающий путь t -> d -> c -> b -> s. Минимальный вес дуг на этом пути равен 4.
```mermaid
graph LR
    s-->|6|a
    b-.->|4|s
    c-.->|6|s
    a-.->|5|b
    c-.->|5|b
    d-.->|10|c
    t-.->|8|d
    c-.->|5|a
    t-.->|2|a
    a-->|6|t
    style s fill:#926EAE,stroke:#555,stroke-width:2px
    style t fill:#926EAE,stroke:#555,stroke-width:2px
    style b fill:#926EAE,stroke:#555,stroke-width:2px
    style c fill:#926EAE,stroke:#555,stroke-width:2px
    style d fill:#926EAE,stroke:#555,stroke-width:2px
```

Обновляем поток s -> b: 0 , b ->c: 1, c->d: 6, d->t: 4


```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    c-.->|6|s
    a-.->|5|b
    c-.->|1|b
    b-->|4|c
    d-.->|6|c
    c-->|4|d
    t-.->|4|d
    d-->|4|t
    c-.->|5|a
    t-.->|2|a
    a-->|6|t
    
```


Скорректируем соответствующим образом локальные потоки в исходной сети.

```mermaid
graph LR
    s-->|"(6,6)"|a
    s-->|"(4,4)"|b
    s-->|"(0,6)"|c
    b-->|"(0,5)"|a
    b-->|"(4,5)"|c
    c-->|"(4,10)"|d
    d-->|"(4,8)"|t
    a-->|"(0,5)"|c
    a-->|"(6,8)"|t

```


### 4. Продолжим поиск увеличивающего пути в остаточной сети

```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    c-.->|6|s
    a-.->|5|b
    c-.->|1|b
    b-->|4|c
    d-.->|6|c
    c-->|4|d
    t-.->|4|d
    d-->|4|t
    c-.->|5|a
    t-.->|2|a
    a-->|6|t
    
```

В остаточной сети найден увеличивающий путь t -> d -> c -> s. Минимальный вес дуг на этом пути равен 4.
```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    c-.->|6|s
    a-.->|5|b
    c-.->|1|b
    b-->|4|c
    d-.->|6|c
    c-->|4|d
    t-.->|4|d
    d-->|4|t
    c-.->|5|a
    t-.->|2|a
    a-->|6|t
    style t fill:#926EAE,stroke:#555,stroke-width:2px
    style s fill:#926EAE,stroke:#555,stroke-width:2px
    style c fill:#926EAE,stroke:#555,stroke-width:2px
    style d fill:#926EAE,stroke:#555,stroke-width:2px
```
Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    c-.->|2|s
    s-->|4|c
    a-.->|5|b
    c-.->|1|b
    b-->|4|c
    d-.->|2|c
    c-->|8|d
    d-->|8|t
    c-.->|5|a
    t-.->|2|a
    a-->|6|t

```

Скорректируем соответствующим образом локальные потоки в исходной сети.

```mermaid
graph LR
    s-->|"(6,6)"|a
    s-->|"(4,4)"|b
    s-->|"(4,6)"|c
    b-->|"(0,5)"|a
    b-->|"(4,5)"|c
    c-->|"(8,10)"|d
    d-->|"(8,8)"|t
    a-->|"(0,5)"|c
    a-->|"(6,8)"|t

```

### 5. Продолжим поиск увеличивающего пути в остаточной сети

```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    c-.->|2|s
    s-->|4|c
    a-.->|5|b
    c-.->|1|b
    b-->|4|c
    d-.->|2|c
    c-->|8|d
    d-->|8|t
    c-.->|5|a
    t-.->|2|a
    a-->|6|t
    
```

В остаточной сети найден увеличивающий путь t -> a -> b -> c -> s. Минимальный вес дуг на этом пути равен 2.
```mermaid
graph LR
    

    s-->|6|a
    s-->|4|b
    c-.->|2|s
    s-->|4|c
    a-.->|5|b
    c-.->|1|b
    b-->|4|c
    d-.->|2|c
    c-->|8|d
    d-->|8|t
    c-.->|5|a
    t-.->|2|a
    a-->|6|t

    style t fill:#926EAE,stroke:#555,stroke-width:2px
    style s fill:#926EAE,stroke:#555,stroke-width:2px
    style c fill:#926EAE,stroke:#555,stroke-width:2px
    style a fill:#926EAE,stroke:#555,stroke-width:2px
    style b fill:#926EAE,stroke:#555,stroke-width:2px
```
Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s-->|6|a
    s-->|4|b
    
    s-->|6|c
    a-.->|3|b
    b-->|2|a
    c-.->|3|b
    b-->|2|c
    d-.->|2|c
    c-->|8|d
    d-->|8|t
    c-.->|5|a
    
    a-->|8|t
```

Скорректируем соответствующим образом локальные потоки в исходной сети.

```mermaid
graph LR
    s-->|"(6,6)"|a
    s-->|"(4,4)"|b
    s-->|"(6,6)"|c
    b-->|"(2,5)"|a
    b-->|"(2,5)"|c
    c-->|"(8,10)"|d
    d-->|"(8,8)"|t
    a-->|"(0,5)"|c
    a-->|"(8,8)"|t

```
### 6. Продолжим поиск увеличивающего пути в остаточной сети
 
В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной **16** является максимальным для данной сети.

### 7. Проверим значение максимального потока перебором всех разрезов сети.
Разрез сети - разбиение множества вершин на два подмножества V<sub>1</sub> и V<sub>2</sub>, где во множество V<sub>1</sub> входит источник, а в V<sub>2</sub> входит сток.

Пропускная способность разреза - сумма пропускной способности дуг, начинающихся в вершинах из множества V<sub>1</sub> и оканчивающихся в вершинах из V<sub>2</sub>.

Для сети из _n_ вершин существует 2<sup>n - 2</sup> различных разрезов, так как две вершины из множества (источник и сток) "зафиксированы" в V<sub>1</sub> и V<sub>2</sub>, остальные вершины можно различными способами распределять между множествами V<sub>1</sub> и V<sub>2</sub>.

Для сети из 6 вершин нужно найти 2<sup>6 - 2</sup> = 2<sup>4</sup> = 16 разрезов. 

| № | V<sub>1</sub>                   | V<sub>2</sub> | Пропускная способность разреза |
|---|:--------------------------------|:--------------|:------------------------------:|
| 1 | s                               | a, b, c, d, t |   6+4+6 = 16             |
|   | **s + одна вершина из a, b, c,d** |               |                                |
| 2 | s, a                            | b, c,d, t       |   4+6+5+8=23                |
| 3 | s, b                            | a, c, d,t       |   6+6+5+5=22             |
| 4 | s, c                            | a, b, d,t       |     6+4+10=20      |
| 5 | s, d                              | a, b, c, t       |   4+6+6+8=24          |
|   | **s + пара вершин из a, b, c,d**  |               |                                |
| 6 | s, a, b                         | c,d, t          |   6+5+8+5=24                 |
| 7 | s, a, c                         | b,d, t          |     4+8+10=22            |
| 8 | s, b, c                         | a, d,t          |    6+5+10=21          |
| 9 | s, a, d                      | b,c, t          |         4+6+5+8=23           |
| 10 | s, b, d                         | a,c, t          |  6+6+5+5+8=30               |
| 11| s, c, d                         | a, b,t          |    6+4+8=18          |
|   | **s + три вершины из a, b, c,d**  |               |                                |
| 12 | s, a, b, c                      | d,t             |    8+10=18                |
| 13 | s, a, b, d                      | c,t             |     6+5+8+5+8=32               |
| 14 | s, a, d, c                      | b,t             |     4+8+8=20               |
| 15 | s, d, b, c                      | a,t             |      6+8+5=19              |
|   | **s + четыре вершины из a, b, c,d**  |               |                                |
| 16 | s, a,b,c,d                     | t             |      8+8=16              |
Минимальная пропускная способность разреза равна **16** ( {s} / { a, b, c, t} ), что совпадает с найденной величиной максимального потока в сети.

### Ответ:
Максимальный поток в сети равен **16**, он реализуется следующим локальными потоками:

```mermaid
graph LR
    s-->|"(6,6)"|a
    s-->|"(4,4)"|b
    s-->|"(6,6)"|c
    b-->|"(2,5)"|a
    b-->|"(2,5)"|c
    c-->|"(8,10)"|d
    d-->|"(8,8)"|t
    a-->|"(0,5)"|c
    a-->|"(8,8)"|t

```
