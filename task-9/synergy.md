# Задание №9
# Задача о максимальном потоке. Вариант 3.
#### Пропускная способность дуг сети:
|          Дуги          | sa | sb | ac | ba | bc | bd | cd | dt | ct |
|:----------------------:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность | 1  | 5  | 4  | 1  | 3  | 7  | 8  | 12 |  3 |

## Строим сеть по таблице (источник s, сток t)
```mermaid
graph LR
    s-->|1|a
    a-->|4|c
    s-->|5|b
    b-->|1|a
    b-->|3|c
    b-->|7|d
    c-->|8|d
    d-->|12|t
    c-->|3|t
```

## Строим остаточную сеть
```mermaid
graph LR
    t-.->|3|c
    t-.->|12|d
    d-.->|8|c
    d-.->|7|b
    c-.->|3|b
    c-.->|4|a
    a-.->|1|b
    a-.->|1|s
    b-.->|5|s
```

## Начинаем поиск увеличивающего пути
Нам необходимо найти ориетвированный путь из t в s.
$$t->c->a->s$$
Минимальный вес дуг на этом пути равен 1.

```mermaid
graph LR
    t-.->|2|c
    c-->|1|t
    t-.->|12|d
    d-.->|8|c
    d-.->|7|b
    c-.->|3|b
    c-.->|3|a
    a-->|1|c
    a-.->|1|b
    s-->|1|a
    b-.->|5|s
```

## Приводим исходную сеть к текущему варианту, добавляя локальные потоки
```mermaid
graph LR
    s-->|"(1, 1)"|a
    a-->|"(1, 4)"|c
    s-->|"(0, 5)"|b
    b-->|"(0, 1)"|a
    b-->|"(0, 3)"|c
    b-->|"(0, 7)"|d
    c-->|"(0, 8)"|d
    d-->|"(0, 12)"|t
    c-->|"(1, 3)"|t
```

## Продолжаем поиск увеличивающего пути

```mermaid
graph LR
    t-.->|2|c
    c-->|1|t
    t-.->|12|d
    d-.->|8|c
    d-.->|7|b
    c-.->|3|b
    c-.->|3|a
    a-->|1|c
    a-.->|1|b
    s-->|1|a
    b-.->|5|s
```

Увеличивающйи путь $$t->c->b->s$$
Минимальный вес дуг на этом пути равен 2.
Дуги, для которых вес стал 0, удалим из остаточной сети.

```mermaid
graph LR
    c-->|3|t
    t-.->|12|d
    d-.->|8|c
    d-.->|7|b
    c-.->|1|b
    b-->|2|c
    c-.->|3|a
    a-->|1|c
    a-.->|1|b
    s-->|1|a
    b-.->|3|s
    s-->|2|b
```

## Приводим исходную сеть к текущему варианту, добавляя локальные потоки
```mermaid
graph LR
    s-->|"(1, 1)"|a
    a-->|"(1, 4)"|c
    s-->|"(2, 5)"|b
    b-->|"(0, 1)"|a
    b-->|"(2, 3)"|c
    b-->|"(0, 7)"|d
    c-->|"(0, 8)"|d
    d-->|"(0, 12)"|t
    c-->|"(3, 3)"|t
```

## Продолжаем поиск увеличивающего пути

```mermaid
graph LR
    c-->|3|t
    t-.->|12|d
    d-.->|8|c
    d-.->|7|b
    c-.->|1|b
    b-->|2|c
    c-.->|3|a
    a-->|1|c
    a-.->|1|b
    s-->|1|a
    b-.->|3|s
    s-->|2|b
```

Увеличивающйи путь $$t->d->b->s$$
Минимальный вес дуг на этом пути равен 3.
Дуги, для которых вес стал 0, удалим из остаточной сети.

```mermaid
graph LR
    c-->|3|t
    t-.->|9|d
    d-->|3|t
    d-.->|8|c
    d-.->|4|b
    b-->|3|d
    c-.->|1|b
    b-->|2|c
    c-.->|3|a
    a-->|1|c
    a-.->|1|b
    s-->|1|a
    s-->|5|b
```

## Приводим исходную сеть к текущему варианту, добавляя локальные потоки
```mermaid
graph LR
    s-->|"(1, 1)"|a
    a-->|"(1, 4)"|c
    s-->|"(5, 5)"|b
    b-->|"(0, 1)"|a
    b-->|"(2, 3)"|c
    b-->|"(3, 7)"|d
    c-->|"(0, 8)"|d
    d-->|"(3, 9)"|t
    c-->|"(3, 3)"|t
```

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 6 является максимальным.

Проверим значение максимального потока перебором всех разрезов сети
Для сети из 6 вершин нужно найти \(2^(6-2) = 2^4 = 16\) разрезов

| №  | V<sub>1</sub>                        | V<sub>2</sub>       | Пропускная способность разреза |
|----|:-------------------------------------|:--------------------|:------------------------------:|
| 1  | s                                    | a, b, c, d, t       | 1 + 5 = 6                      |
| 2  | s, a                                 | b, c, d, t          | 5 + 4 = 9                      |
| 3  | s, b                                 | a, c, d, t          | 1 + 1 + 3 + 7 = 12             |
| 4  | s, c                                 | a, b, d, t          | 1 + 5 + 8 + 3 = 17             |
| 5  | s, d                                 | a, b, c, t          | 1 + 5 + 12 = 18                |
| 6  | s, a, b                              | c, d, t             | 4 + 3 + 7 = 14                 |
| 7  | s, a, c                              | b, d, t             | 5 + 8 + 3 = 16                 |
| 8  | s, a, d                              | b, c, t             | 5 + 4 + 12 = 21                |
| 9  | s, b, c                              | a, d, t             | 1 + 1 + 7 + 8 + 3 = 20         |
| 10 | s, b, d                              | a, c, t             | 1 + 1 + 3 + 12 = 17            |
| 11 | s, c, d                              | a, b, t             | 1 + 5 + 3 + 12 = 21            |
| 12 | s, a, b, c                           | d, t                | 7 + 8 + 3 = 18                 |
| 13 | s, a, b, d                           | c, t                | 4 + 3 + 12 = 19                |
| 14 | s, a, c, d                           | b, t                | 5 + 3 + 12 = 20                |
| 15 | s, b, c, d                           | a, t                | 1 + 1 + 3 + 12 = 17            |
| 16 | s, a, b, c, d                        | t                   | 3 + 12 = 15                    |

Максимальная пропускная способность разряда равна 6 (s / a, b, c, d, t), что совпадает с найденнной величиной максимального потока в сети
