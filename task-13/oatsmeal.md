# Задача по генетическим алгоритмам. Вариант 10.

Решить задачу о рюкзаке с применением генетического алгоритма, с учетом следующих требований:
   - Придумать условия задачи с количеством предметов не менее 7.
   - Численность популяции не менее 8 особей, в скрещивании участвует половина популяции. 
   - Для скрещивания выбираются сильнейшие особи, скрещивание – равномерное.
   - До выполнения алгоритма сформулировать стратегию применения оператора мутации.
   - Сформировать не менее 3 поколений, не считая первоначального.

## Исходные данные:
У нас есть рюкзак вместимостью 25 кг и 7 предметов, каждый из которых имеет свой вес и ценность. Необходимо выбрать набор предметов, который максимизирует общую ценность, не превышая вместимость рюкзака.

## Таблица с начальными данными:
| Предметы  |  1  | 2 |  3  | 4 | 5 | 6 | 7  |
|:----------|:---:|:-:|:---:|:-:|:-:|:-:|:--:|
| Вес       |  8  | 3 | 4   | 6 | 9 | 7 | 5  |
|  Стоимость| 20  | 4 | 13  | 8 | 1 | 17| 2  |

Анализ таблицы показывает, что все предметы не могут одновременно поместиться в рюкзак, т.к общий вес равен 42, что превышает вместимость рюкзака.

## Кодирование особи
Каждая особь (решение) будет представлена в виде бинарной строки длиной 7, где каждый бит указывает, взят ли соответствующий предмет (1) или нет (0). Например, строка 1010101 означает, что взяты предметы 1, 3, 5 и 7.

## Функция приспособленности
Функция приспособленности (fitness) будет вычисляться как суммарная ценность предметов в рюкзаке, если их общий вес не превышает 15 кг. Если вес превышает 25 кг, то приспособленность равна 0.

Пример:
Для особи 1001000:

Вес = 8 + 6 = 14 кг

Ценность = 20 + 8 = 28

Приспособленность = 28

## Стратегия мутации
Мутации будут применяться в том случае, если особь не жизнеспособна. Если мутация происходит, то случайный бит в хромосоме инвертируется (0 → 1 или 1 → 0). Мутация происходит до того момента, пока особь не станет жизнеспособной.

## Скрещивание
Для скрещивания выбираются 4 сильнейшие особи (половина популяции). Скрещивание будет равномерным: для каждого бита потомка случайно выбирается бит одного из родителей, исходя из рандомно сгенерированной последовательности. 

Для первого потомка: если в последовательности встречается `1`, то берем бит из той же позиции, что и в сгенерированной последовательности, первого родителя, если встречается `0`, то берем бит из той же позиции, что и в сгенерированной последовательности, второго родителя. 

Для второго потомка: если в последовательности встречается `1`, то берем бит из той же позиции, что и в сгенерированной последовательности, второго родителя, если встречается `0`, то берем бит из той же позиции, что и в сгенерированной последовательности, первого родителя.

## Инициализация популяции
Создадим начальную популяцию из 8 случайных особей:

| №            | Бинарный код| Вес | Приспособленность |
|--------------|:-----------:|:---:|:-----------------:|
| X<sub>1</sub>| 1001000     | 14  |          28       |
| X<sub>2</sub>| 0010100     | 13  |          14       |
| X<sub>3</sub>| 1100011     | 23  |          43       |
| X<sub>4</sub>| 0111111     | 34  |          0        |
| X<sub>5</sub>| 0010110     | 20  |          31       |
| X<sub>6</sub>| 1101001     | 23  |          34       |
| X<sub>7</sub>| 0001110     | 22  |          26       |
| X<sub>8</sub>| 1000001     | 13  |          22       |

Можем заметить, что X<sub>4</sub> имеет приспособленность равную 0. Проведем мутацию этой особи для получения приспособленной особи: 

X<sub>4</sub>: Меняем пятый бит 1 -> 0

0111111 -> 0111011 

Вес: 25 

Приспособленность: 44

## Формирование поколений
### Поколение 0 (Начальное):

| №            | Бинарный код| Вес | Приспособленность |
|--------------|:-----------:|:---:|:-----------------:|
| X<sub>1</sub>| 1001000     | 14  |          28       |
| X<sub>2</sub>| 0010100     | 13  |          14       |
| X<sub>3</sub>| 1100011     | 23  |          43       |
| X<sub>4</sub>| 0111011     | 25  |          44       |
| X<sub>5</sub>| 0010110     | 20  |          31       |
| X<sub>6</sub>| 1101001     | 23  |          34       |
| X<sub>7</sub>| 0001110     | 22  |          26       |
| X<sub>8</sub>| 1000001     | 13  |          22       |

Суммарная приспособленность в поколении: 242.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>4</sub> (44), X<sub>3</sub> (43), X<sub>6</sub> (34), X<sub>5</sub> (31)

### Скрещивание:

#### Скрещиваем особей X<sub>4</sub> и X<sub>6</sub>.

Сгенерируем случайную последовательность: 1000110

X<sub>4</sub>: 0111011 

X<sub>6</sub>: 1101001 

Потомки: 

X<sub>9</sub>: 0101011  - Вес: 21; Приспособленность: 40

X<sub>10</sub>: 1111001 - Вес: 26; Приспособленность: 0

Можем заметить, что X<sub>10</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>10</sub>: Меняем псоледний бит 1 -> 0 

1111001 -> 1111000 - Вес: 21; Приспособленность: 45

#### Скрещиваем особей X<sub>3</sub> и X<sub>5</sub>.

X<sub>3</sub>: 1100011

X<sub>5</sub>: 0010110 

Потомки: 

X<sub>11</sub> 1010010 - Вес: 19; Приспособленность: 50

X<sub>12</sub> 0100111 - Вес: 24; Приспособленность: 24

В 1 поколение берем родителей и потомков, но X<sub>12</sub> (24) слабее X<sub>1</sub> (28), берем X<sub>1</sub>. 

### Поколение 1 

| №             | Бинарный код| Вес | Приспособленность |
|---------------|:-----------:|:---:|:-----------------:|
| X<sub>1</sub> | 1001000     | 14  |          28       |
| X<sub>4</sub> | 0111011     | 25  |          44       |
| X<sub>3</sub> | 1100011     | 23  |          43       |
| X<sub>6</sub> | 1101001     | 23  |          34       |
| X<sub>5</sub> | 0010110     | 20  |          31       |
| X<sub>9</sub> | 0101011     | 21  |          40       |
| X<sub>10</sub>| 1111000     | 21  |          45       |
| X<sub>11</sub>| 1010010     | 19  |          50       |

Суммарная приспособленность в поколении: 315.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>11</sub>(50), X<sub>10</sub> (45), X<sub>4</sub>(44), X<sub>3</sub> (43)  

### Скрещивание:

#### Скрещиваем особей X<sub>4</sub> и X<sub>10</sub>.

Сгенерируем случайную последовательность: 1001001

X<sub>4</sub>: 0111011 

X<sub>10</sub>: 1111000 

Потомки: 

X<sub>13</sub>: 0111001 - Вес: 18; Приспособленность: 27

X<sub>14</sub>: 1111010 - Вес: 28; Приспособленность: 0

Можем заметить, что X<sub>14</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>14</sub>: Меняем второй бит 1 -> 0 

1111010 -> 1011010 - Вес: 25; Приспособленность: 58

#### Скрещиваем особей X<sub>3</sub> и X<sub>11</sub>.

X<sub>3</sub>: 1100011

X<sub>11</sub>: 1010010 

Потомки: 

X<sub>15</sub>: 1010011 - Вес: 24; Приспособленность: 52

X<sub>16</sub>: 1100010 - Вес: 18; Приспособленность: 41

Во 2 поколение берем родителей и потомков, но X<sub>13</sub> (27)  слабее X<sub>6</sub> (34), берем X<sub>6</sub>.  

### Поколение 2 

| №             | Бинарный код| Вес | Приспособленность |
|---------------|:-----------:|:---:|:-----------------:|
| X<sub>14</sub>| 1011010     | 25  |          58       |
| X<sub>15</sub>| 1010011     | 24  |          52       |
| X<sub>11</sub>| 1010010     | 19  |          50       |
| X<sub>10</sub>| 1111000     | 21  |          45       |
| X<sub>4</sub> | 0111011     | 25  |          44       |
| X<sub>3</sub> | 1100011     | 23  |          43       |
| X<sub>16</sub>| 1100010     | 18  |          41       |
| X<sub>6</sub> | 1101001     | 23  |          34       |

Суммарная приспособленность в поколении: 367.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>14</sub> (58), X<sub>15</sub> (52), X<sub>11</sub> (50), X<sub>10</sub> (45)

### Скрещивание:

#### Скрещиваем особей X<sub>14</sub> и X<sub>15</sub>.

Сгенерируем случайную последовательность: 1111000

X<sub>14</sub>: 1011010 

X<sub>15</sub>: 1010011 

Потомки: 

X<sub>17</sub>: 1011011 - Вес: 30; Приспособленность: 0

X<sub>18</sub>: 1010010 - Вес: 19; Приспособленность: 50

Можем заметить, что X<sub>17</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>17</sub>: Меняем четвертый бит 1 -> 0

1011011 -> 1010011 - Вес: 24; Приспособленность: 50

#### Скрещиваем особей X<sub>11</sub> и X<sub>10</sub>.

X<sub>11</sub>: 1010010

X<sub>10</sub>: 1111000 

Потомки: 

X<sub>19</sub>: 1010000 - Вес: 12; Приспособленность: 33

X<sub>20</sub>: 1111010 - Вес: 28; Приспособленность: 0

Можем заметить, что X<sub>20</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>20</sub>: Меняем первый бит 1 -> 0, третий бит 1 -> 0, пятый 0 -> 1 

1111010 -> 0101110 - Вес: 25; Приспособленность: 30

В 3 поколение берем родителей и потомков, но X<sub>19</sub> (33) и X<sub>20</sub> (30) слабее X<sub>3</sub> (43) и X<sub>4</sub> (44), берем X<sub>3</sub> и X<sub>4</sub>. 

### Поколение 3 

| №             | Бинарный код| Вес | Приспособленность |
|---------------|:-----------:|:---:|:-----------------:|
| X<sub>17</sub>| 1010011     | 24  |          50       |
| X<sub>14</sub>| 1011010     | 25  |          58       |
| X<sub>15</sub>| 1010011     | 24  |          52       |
| X<sub>18</sub>| 1010010     | 19  |          50       |
| X<sub>11</sub>| 1010010     | 19  |          50       |
| X<sub>10</sub>| 1111000     | 21  |          45       |
| X<sub>4</sub> | 0111011     | 25  |          44       |
| X<sub>3</sub> | 1100011     | 23  |          43       |


Суммарная приспособленность в поколении: 392.

Условие окончания генетического алгоритма было достигнуто - было сформировано 3 поколение. По сравнению с начальным поколением суммарная приспособленность ожидаемо выросла с 242 до 392, наблюдается "эволюция". 

Лидер 3 - поколения X<sub>14</sub> с весом 25 и показателем приспособленности 58. Таким образом, можно сказать, что максимальная стоимость предметов - 58, с общим весом 25. Набор предметов, обеспечивающих максимальную стоимость: 1, 3, 4, 6. Свободного место в рюкзаке: 0. 

## Ответ: 

- Максимально возможная стоимость - 58

- Набор предметов: 1, 3, 4, 6

1: стоимость 20, вес 8

3: стоимость 13, вес 4

4: стоимость 8, вес 6

6: стоимость 17, вес 7

- Общий вес предметов: 25

- Свободное место в рюкзаке: 0
