# Задача о рюкзаке (Knapsack problem). Генетический алгоритм.

## Вариант 7:

Решить задачу о рюкзаке с применением генетического алгоритма, с учетом следующих требований:
- Придумать условия задачи с количеством предметов не менее 8.
- Численность популяции не менее 6 особей, в скрещивании участвует 1/3 популяции.
- Для скрещивания выбираются сильнейшие особи, скрещивание – двухточечное.
- До выполнения алгоритма сформулировать стратегию применения оператора мутации.
- Сформировать не менее 3 поколений, не считая первоначального.

### Условия задачи

|  Предмет  | A | B | C | D | E | F | G | H | 
|:---------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| Стоимость | 2 | 5 | 3 | 8 | 6 | 3 | 3 | 4 |
| Вес       | 4 | 5 | 2 | 6 | 3 | 1 | 4 | 7 |

Вместимость рюкзака V = 18.

Общий вес предметов равен 32, что превышает вместимость рюкзака.

### Стратегия применения оператора мутации

В случае, если особь нежизнеспособна, к ней будет применена мутация. Если все полученные потомки жизнеспособны, мутация применится к наиболее приспособленному потомку.

### Решение
### Шаг 1. 
Инициализация начальной популяции оценка приспособленности каждого решения:

Создадим начальную популяцию из 6 случайных решений (особей).

Популяция в 1-ом поколении:

|Особь|Набор хромосом|Приспособленность|
|:---:|:------------:|:---------------:|
| $X_1$|00010101|15 (Вес 14)|
| $X_2$|10100100|8 (Вес 7)|
| $X_3$|01001010|14 (Вес 12)|
| $X_4$|10001001|12 (Вес 14)|
| $X_5$|11100000|10 (Вес 11)|
| $X_6$|01011000|19 (Вес 14)|

### Шаг 2. 
Кроссинговер (скрещивание): 

В скрещивании участвует 1/3 популяции, т.е. 2 особи:

Две самые приспособленные особи это $X_1$ и $X_6$. Применим к ним *двухточечное* скрещивание, когда родительские хромосомы обмениваются участком генетического кода, который находится между двумя случайно выбранными точками скрещивания.
|Особь|Решение|
|:---:|:------------:|
| $X_1$|0001.010.1|
| $X_6$|0101.100.0|

После обмена частями родительских хромосом получаем двух потомков $X_7$ и $X_8$:
|Особь|Решение| Приспособленность |
|:---:|:------------:|:------------:|
| $X_7$|0001**100**1| 18 (Вес 16)|
| $X_8$|0101**010**0| 16 (Вес 12)|

Оба потомка оказались более приспособленными чем родитель $X_1$, но менее приспособленными, чем родитель $X_6$.
### Шаг 3. 
Мутация новых решений:

Применим мутацию в одной позиции к особи $X_7$, то есть инвертируем, например разряд 3, и получим $X_9$:
|Особь|Решение| Приспособленность |
|:---:|:------------:|:------------:|
| $X_9$|00**1**11001| 21 (Вес 18)|

### Шаг 4. 
Формирование новой популяции:
Второе поколение сформируем из 6 лучших особей всех поколений:
|Особь|Набор хромосом|Приспособленность|
|:---:|:------------:|:---------------:|
| $X_1$|00010101|15 (Вес 14)|
| $X_3$|01001010|14 (Вес 12)|
| $X_4$|10001001|12 (Вес 14)|
| $X_6$|01011000|19 (Вес 14)|
| $X_8$|01010100| 16 (Вес 12)|
| $X_9$|00111001| 21 (Вес 18)|

### Шаг 5. 
Кроссинговер (скрещивание): 

В скрещивании участвует 1/3 популяции, т.е. 2 особи:

Две самые приспособленные особи это $X_6$ и $X_9$. Применим к ним *двухточечное* скрещивание.
|Особь|Решение|
|:---:|:------------:|
| $X_6$|01.01.1000|
| $X_9$|00.11.1001|

После обмена частями родительских хромосом получаем двух потомков X<sub>10</sub> и X<sub>11</sub>:
|Особь|Решение| Приспособленность |
|:---:|:------------:|:------------:|
| X<sub>10</sub>|01**11**1000| 22 (Вес 16)|
| X<sub>11</sub>|00**01**1001| 18 (Вес 16)|

### Шаг 6. 
Мутация новых решений:

Применим мутацию в одной позиции к особи X<sub>10</sub>, то есть инвертируем, например разряд 6, и получим X<sub>12</sub>:
|Особь|Решение| Приспособленность |
|:---:|:------------:|:------------:|
| X<sub>12</sub>|01111**1**00| 25 (Вес 17)|

### Шаг 7. 
Формирование новой популяции:
Следующее поколение сформируем из 6 лучших особей всех поколений:
|Особь|Набор хромосом|Приспособленность|
|:---:|:------------:|:---------------:|
| $X_1$|00010101|15 (Вес 14)|
| $X_6$|01011000|19 (Вес 14)|
| $X_8$|01010100| 16 (Вес 12)|
| $X_9$|00111001| 21 (Вес 18)|
| X<sub>11</sub>|00011001| 18 (Вес 16)|
| X<sub>12</sub>|01111100| 25 (Вес 17)|

### Шаг 7. 
Завершения алгоритма, так как достигнуто условие остановки алгоритма.

## Ответ:

Самая сильная особь в популяции X<sub>12</sub> (01111100), значит максимальная стоимость предметов в рюкзаке: 25.

Набор предметов, обеспечивающий максимальную стоимость: B,C,D,E,F.

Оставшееся место в рюкзаке: 1.

