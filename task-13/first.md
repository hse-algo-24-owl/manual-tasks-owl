# Задача по генетическим алгоритмам. Вариант 5.

## Исходные данные:
У нас есть рюкзак вместимостью 15 кг и 7 предметов, каждый из которых имеет свой вес и ценность. Необходимо выбрать набор предметов, который максимизирует общую ценность, не превышая вместимость рюкзака.

## Таблица с начальными данными:
| Предметы  |  1  | 2 |  3  | 4 | 5 | 6 | 7 |
|:----------|:---:|:-:|:---:|:-:|:-:|:-:|:-:|
| Вес |  2  | 3 | 5   | 7 | 1 | 4 | 6  |
|  Стоимость    | 10  | 15 | 20  | 25 | 5 | 12 | 18  |

Анализ таблицы показывает, что все предметы не могут одновременно поместиться в рюкзак, т.к общий вес равен 28, что превышает вместимость рюкзака.

## Кодирование особи
Каждая особь (решение) будет представлена в виде бинарной строки длиной 7, где каждый бит указывает, взят ли соответствующий предмет (1) или нет (0). Например, строка 1010101 означает, что взяты предметы 1, 3, 5 и 7.

## Функция приспособленности
Функция приспособленности (fitness) будет вычисляться как суммарная ценность предметов в рюкзаке, если их общий вес не превышает 15 кг. Если вес превышает 15 кг, то приспособленность равна 0.

Пример:
Для особи 1010101:

Вес = 2 + 5 + 1 + 6 = 14 кг

Ценность = 10 + 20 + 5 + 18 = 53

Приспособленность = 53

## Стратегия мутации
Мутация будет применяться с вероятностью 10%. Если мутация происходит, то случайный бит в хромосоме инвертируется (0 → 1 или 1 → 0). Это позволяет избежать застревания в локальных оптимумах и исследовать новые решения.

## Скрещивание
Для скрещивания выбираются 4 сильнейшие особи (половина популяции). Скрещивание будет равномерным: для каждого бита потомка случайно выбирается бит одного из родителей, исходя из рандомно сгенерированной последовательности. 

Для первого потомка: если в последовательности встречается `1`, то берем бит из той же позиции, что и в сгенерированной последовательности, первого родителя, если встречается `0`, то берем бит из той же позиции, что и в сгенерированной последовательности, второго родителя. 

Для второго потомка: если в последовательности встречается `1`, то берем бит из той же позиции, что и в сгенерированной последовательности, второго родителя, если встречается `0`, то берем бит из той же позиции, что и в сгенерированной последовательности, первого родителя.

## Инициализация популяции
Создадим начальную популяцию из 8 случайных особей:

| № | Бинарный код                  | Вес | Приспособленность |
|---|:--------------------------------|:--------------|:------------------------------:|
| X<sub>1</sub>  | 1011000                              | 14  |          55       |
| X<sub>2</sub> | 0001110                          |  12   |  42
| X<sub>3</sub>  | 1101010                              | 16  |          0       |
| X<sub>4</sub>  | 0000111                              | 11  |          35       |
| X<sub>5</sub>  | 1001010                              | 13  |          47       |
| X<sub>6</sub>  | 0011001                              | 18  |          0       |
| X<sub>7</sub>  | 1110010                            | 14  |          57       |
| X<sub>8</sub>  | 1000100                              | 3  |          15       |

Можем заметить, что X<sub>3</sub> и X<sub>6</sub> имеют приспособленность равную 0. Проведем мутацию данных особей для получения приспособленных особей: 

X<sub>3</sub>: Меняем первый бит 1 -> 0

1101010 -> 0101010 Вес: 14 Приспособленность: 52

X<sub>6</sub>: Меняем второй бит 0 -> 1, седьмой бит 1 -> 0 

0011001 -> 0111000 Вес: 15 Приспособленность: 60

## Формирование поколений
### Поколение 0 (Начальное):

| № | Бинарный код                  | Вес | Приспособленность |
|---|:--------------------------------|:--------------|:------------------------------:|
| X<sub>1</sub>  | 1011000                              | 14  |          55       |
| X<sub>2</sub> | 0001110                          |  12   |  42
| X<sub>3</sub>  | 0101010                              | 14  |          52       |
| X<sub>4</sub>  | 0000111                              | 11  |          35       |
| X<sub>5</sub>  | 1001010                              | 13  |          47       |
| X<sub>6</sub>  | 0111000                             | 15  |          60       |
| X<sub>7</sub>  | 1110010                            | 14  |          57       |
| X<sub>8</sub>  | 1000100                              | 3  |          15       |

Суммарная приспособленность в поколении: 363.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>6</sub>(60), X<sub>7</sub>(57), X<sub>1</sub>(55), X<sub>3</sub>(52)

### Скрещивание:

#### Скрещиваем особей X<sub>3</sub> и X<sub>6</sub>.

Сгенерируем случайную последовательность: 0110101

X<sub>3</sub> 0101010 

X<sub>6</sub> 0111000 

Потомки: 

X<sub>9</sub> 0111010 Вес: 19 Приспособленность: 0

X<sub>10</sub> 0101000 Вес: 10 Приспособленность: 40

Можем заметить, что X<sub>9</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>9</sub>: Меняем четвертый бит 1 -> 0 

0111010 -> 0110010 Вес: 12 Приспособленность: 47

#### Скрещиваем особей X<sub>7</sub> и X<sub>1</sub>.

Сгенерируем случайную последовательность: 0110101

X<sub>7</sub> 1110010

X<sub>1</sub> 1011000 

Потомки: 

X<sub>11</sub> 1111000 Вес: 17 Приспособленность: 0

X<sub>12</sub> 1010010 Вес: 11 Приспособленность: 42

Можем заметить, что X<sub>11</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>11</sub>: Меняем первый бит 1 -> 0, шестой бит 1 -> 0,седьмой бит 0 -> 1  

1110010 -> 0110001 Вес: 14 Приспособленность: 53

В 1 поколение берем родителей и потомков. 

### Поколение 1 

| № | Бинарный код                  | Вес | Приспособленность |
|---|:--------------------------------|:--------------|:------------------------------:|
| X<sub>1</sub>  | 1011000                              | 14  |          55       |
| X<sub>3</sub>  | 0101010                              | 14  |          52       |
| X<sub>6</sub>  | 0111000                             | 15  |          60       |
| X<sub>7</sub>  | 1110010                            | 14  |          57       |
| X<sub>9</sub>  | 0110010                              | 12  |          47       |
| X<sub>10</sub>  | 0101000                              | 10  |          40       |
| X<sub>11</sub>  | 0110001                              | 14  |          53       |
| X<sub>12</sub>  | 1010010                              | 11  |          42       |

Суммарная приспособленность в поколении: 406.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>6</sub>(60), X<sub>7</sub>(57), X<sub>1</sub>(55), X<sub>11</sub>(53)

### Скрещивание:

#### Скрещиваем особей X<sub>1</sub> и X<sub>6</sub>.

Сгенерируем случайную последовательность: 1000110

X<sub>6</sub> 0111000 

X<sub>1</sub> 1011000 

Потомки: 

X<sub>13</sub> 0011000 Вес: 12 Приспособленность: 45

X<sub>14</sub> 1111000 Вес: 17 Приспособленность: 0

Можем заметить, что X<sub>14</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>14</sub>: Меняем четвертый бит 1 -> 0, пятый бит 0 -> 1, шестой бит 0 -> 1 

1111000 -> 1110110 Вес: 15 Приспособленность: 62

#### Скрещиваем особей X<sub>7</sub> и X<sub>11</sub>.

Сгенерируем случайную последовательность: 1000110

X<sub>7</sub> 1110010

X<sub>11</sub> 0110001 

Потомки: 

X<sub>15</sub> 1110011 Вес: 20 Приспособленность: 0

X<sub>16</sub> 0110000 Вес: 8 Приспособленность: 35

Можем заметить, что X<sub>15</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>15</sub>: Меняем третий бит 1 -> 0

1110011 ->  1100011 Вес: 15 Приспособленность: 55

Во 2 поколение берем родителей и потомков. 

### Поколение 2 

| № | Бинарный код                  | Вес | Приспособленность |
|---|:--------------------------------|:--------------|:------------------------------:|
| X<sub>1</sub>  | 1011000                              | 14  |          55       |
| X<sub>6</sub>  | 0111000                             | 15  |          60       |
| X<sub>7</sub>  | 1110010                            | 14  |          57       |
| X<sub>11</sub>  | 0110001                              | 14  |          53       |
| X<sub>13</sub>  | 0011000                              | 12  |          45       |
| X<sub>14</sub>  | 1110110                              | 15  |          62       |
| X<sub>15</sub>  | 1100011                              | 15  |          55       |
| X<sub>16</sub>  | 0110000                              |  8 |          35       |

Суммарная приспособленность в поколении: 422.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>6</sub>(60), X<sub>7</sub>(57), X<sub>14</sub>(62), X<sub>15</sub>(55)

### Скрещивание:

#### Скрещиваем особей X<sub>6</sub> и X<sub>14</sub>.

Сгенерируем случайную последовательность: 0101011

X<sub>6</sub> 0111000 

X<sub>14</sub> 1110110 

Потомки: 

X<sub>17</sub> 1111100 Вес: 18 Приспособленность: 0

X<sub>18</sub> 0110010 Вес: 12 Приспособленность: 47

Можем заметить, что X<sub>17</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>17</sub>: Меняем четвертый бит 1 -> 0

1111100 -> 1110100 Вес: 11 Приспособленность: 50

#### Скрещиваем особей X<sub>7</sub> и X<sub>15</sub>.

Сгенерируем случайную последовательность: 0101011

X<sub>7</sub> 1110010

X<sub>15</sub> 1100011 

Потомки: 

X<sub>19</sub> 1100010 Вес: 9 Приспособленность: 37

X<sub>20</sub> 1110011 Вес: 20 Приспособленность: 0

Можем заметить, что X<sub>20</sub> имеет приспособленность равную 0. Проведем мутацию данной особи для получения приспособленной особи. 

X<sub>20</sub>: Меняем первый бит 1 -> 0, второй бит 1 -> 0

1110011 ->  0010011 Вес: 15 Приспособленность: 50

В 3 поколение берем родителей и потомков. 

### Поколение 3 

| № | Бинарный код                  | Вес | Приспособленность |
|---|:--------------------------------|:--------------|:------------------------------:|
| X<sub>6</sub>  | 0111000                             | 15  |          60       |
| X<sub>7</sub>  | 1110010                            | 14  |          57       |
| X<sub>14</sub>  | 1110110                              | 15  |          62       |
| X<sub>15</sub>  | 1100011                              | 15  |          55       |
| X<sub>17</sub>  | 1110100                             |  11 |          50       |
| X<sub>18</sub>  | 0110010                             |  12 |          47       |
| X<sub>19</sub>  | 1100010                             |  9 |          37       |
| X<sub>20</sub>  | 0010011                             |  15 |          50       |

Суммарная приспособленность в поколении: 418.

Условие окончания генетического алгоритма было достигнуто - было сформировано 3 поколение. По сравнению с начальным поколением суммарная приспособленность ожидаемо выросла с 363 до 418, наблюдается "эволюция". 

Лидер 3 - поколения X<sub>14</sub> с весом 15 и показателем приспособленности 62. Таким образом, можно сказать, что максимальная стоимость предметов - 62, с общим весом 15. Набор предметов, обеспечивающих максимальную стоимость: 1, 2, 3, 5, 6. Свободного место в рюкзаке: 0. 

## Ответ: 

- Максимально возможная стоимость - 62

- Набор предметов: 1, 2, 3, 5, 6

1: стоимость 10, вес 2

2: стоимость 15, вес 3

3: стоимость 20, вес 5

5: стоимость 5, вес 1

6: стоимость 12, вес 4

- Общий вес предметов: 15

- Свободное место в рюкзаке: 0