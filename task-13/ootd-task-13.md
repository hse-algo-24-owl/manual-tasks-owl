# Задача о рюкзаке. Генетический алгоритм. Вариант 6.

Решить задачу о рюкзаке с применением генетического алгоритма, с учетом следующих требований:
1. Придумать условия задачи с количеством предметов не менее 7.
2. Численность популяции не менее 4 особей, в скрещивании участвует половина популяции.
3. Для скрещивания выбираются сильнейшие особи, скрещивание – одноточечное.
4. До выполнения алгоритма сформулировать стратегию применения оператора мутации.
5. Сформировать не менее 3 поколений, не считая первоначального.

Имеется рюкзак вместимостью 20 кг и 7 предметов, каждый из которых имеет свой вес и ценность. Необходимо выбрать набор предметов, который максимизирует общую стоимость, не превышая вместимость рюкзака.

## Исходная таблица:
| Предметы  |  1  | 2  |  3  | 4  | 5 | 6  | 7  |
|:----------|:---:|:--:|:---:|:--:|:-:|:--:|:--:|
| Вес       |  3  | 4  | 6   | 8  | 2 | 5  | 7  |
| Стоимость | 12  | 18 | 22  | 30 | 8 | 15 | 25 |

Таблица показывает, общий вес равен 35 кг, что превышает вместимость рюкзака.

## Кодирование особи

Каждая особь будет представлена в виде бинарной строки длиной 7, где каждый бит указывает, взят ли соответствующий предмет (1 - взят) или нет (0 - не взят).

## Расчет приспособленности

Если общий вес предметов взятых в рюкзак не превышает 20 кг, то приспособленность = сумме стоимости этих предметов. Если вес превышает 20 кг, то приспособленность равна 0.

Пример:
Для особи 1010101:
Вес = 3 + 6 + 2 + 7 = 18 кг
Приспособленность = 12 + 22 + 8 + 25 = 67

## Стратегия мутации

Вероятность мутации для каждой особи устанавливается на уровне 14% (1 к 7). Это означает, что каждый бит в хромосоме имеет 14% шанс быть инвертированным (0 → 1 или 1 → 0).

Если мутация происходит, то случайным образом выбирается один бит в хромосоме для инверсии. Это позволяет избежать излишнего изменения хромосомы и сохранить часть полезной информации.

После применения мутации необходимо проверить, остается ли решение допустимым (т.е. не превышает ли общий вес предметов вместимость рюкзака). Если вес превышает допустимый предел, приспособленность особи устанавливается в 0.

Если после мутации решение становится недопустимым (вес превышает вместимость рюкзака), мутация повторяется до тех пор, пока не будет найдено допустимое решение.

Чтобы избежать чрезмерного изменения хромосомы, в каждой особи мутирует только один бит за одну итерацию мутации.

## Скрещивание

Для скрещивания выбираются 4 сильнейшие особи (половина популяции). Скрещивание будет одноточечным: выбирается случайная точка разрыва, и части хромосом родителей обмениваются после этой точки.

## Инициализация популяции
Создадим начальную популяцию (1 поколение) из 8 случайных особей. Бинарный код придумаем самостоятельно:

| № | Бинарный код                  | Вес | Приспособленность |
|---|:------------------------------|:----|:-----------------:|
| X<sub>1</sub>  | 1100101          | 16  |          63       |
| X<sub>2</sub>  | 0011010          | 19  |         67        |
| X<sub>3</sub>  | 0010011          | 18  |         62        |
| X<sub>4</sub>  | 0101100          | 14  |          56       |
| X<sub>5</sub>  | 1001010          | 16  |          57       |
| X<sub>6</sub>  | 0110101          | 19  |          73       |
| X<sub>7</sub>  | 1110000          | 13  |          52       |
| X<sub>8</sub>  | 1110001          | 20  |          77       |

Суммарная приспособленность в поколении: 507.

### Отбор сильнейших для скрещивания:

Сильные особи с их приспособленностью: X<sub>8</sub>(77), X<sub>6</sub>(73), X<sub>2</sub>(67), , X<sub>1</sub>(63)

### Скрещивание:

Скрещиваем особей X<sub>8</sub> и X<sub>6</sub>.

Точка разрыва: 1

Родители:

X<sub>8</sub>: 1110001

X<sub>6</sub>: 0110101

Потомки:

X<sub>9</sub>: 1110101, приспособленность = 0 (так как вес 22)

X<sub>10</sub>: 0110001, приспособленность = 65 (вес = 17)

Проведем мутацию в X<sub>9</sub>. Заменим 2 бит на 0. Получаем 1010101, вес = 18, приспособленность = 67

Скрещиваем особей X<sub>2</sub> и X<sub>1</sub>:

Точка разрыва: 3

Родители:

X<sub>2</sub>: 0011010 

X<sub>1</sub>: 1100101

Потомки:

X<sub>11</sub>: 0010101, приспособленность = 55 (вес = 15)

X<sub>12</sub>: 1101010, приспособленность = 75 (вес = 20)


Во 2 поколение берем наиболее приспособленных особей и потомков. 

### Поколение 2

| № | Бинарный код                  | Вес | Приспособленность |
|---|:------------------------------|:----|:-----------------:|
| X<sub>1</sub>  | 1100101          | 16  |          63       |
| X<sub>2</sub>  | 0011010          | 19  |         67        |
| X<sub>6</sub>  | 0110101          | 19  |          73       |
| X<sub>8</sub>  | 1110001          | 20  |          77       |
| X<sub>9</sub>  | 1010101          | 18  |          67       |
| X<sub>10</sub> | 0110001          | 17  |         65        |
| X<sub>11</sub> | 0010101          | 15  |          55       |
| X<sub>12</sub> | 1101010          | 20  |          75       |

Суммарная приспособленность в поколении: 506.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>8</sub>(77), X<sub>12</sub>(75), X<sub>6</sub>(73), X<sub>2</sub>(67)

### Скрещивание:

Скрещиваем особей X<sub>8</sub> и X<sub>12</sub>.

Точка разрыва: 3

Родители:

X<sub>8</sub>: 1110001

X<sub>12</sub>: 1101010

Потомки:

X<sub>13</sub>: 1111010, приспособленность = 0 (так как вес 26 > 20)

X<sub>14</sub>: 1100001, приспособленность = 55 (вес = 14)

Проведем мутацию в X<sub>13</sub>. Заменим 4 бит на 0. Получаем 1110010, вес = 18, приспособленность = 67

Скрещиваем особей X<sub>6</sub> и X<sub>2</sub>:

Точка разрыва: 3

Родители:

X<sub>6</sub>: 0110101

X<sub>2</sub>: 0011010 

Потомки:

X<sub>15</sub>: 0111010, приспособленность = 0 (вес = 23)

X<sub>16</sub>: 0010101, приспособленность = 55 (вес = 15)

Проведем мутацию в X<sub>15</sub>. Заменим 4 бит на 0. Получаем 0110010, вес = 15, приспособленность = 65

В 3 поколение берем родителей и потомков. 

### Поколение 3

| № | Бинарный код                  | Вес | Приспособленность |
|---|:------------------------------|:----|:-----------------:|
| X<sub>2</sub>  | 0011010          | 19  |         67        |
| X<sub>6</sub>  | 0110101          | 19  |          73       |
| X<sub>8</sub>  | 1110001          | 20  |          77       |
| X<sub>12</sub> | 1101010          | 20  |          75       |
| X<sub>13</sub> | 1110010          | 18  |         67        |
| X<sub>14</sub> | 1100001          | 14  |          55       |
| X<sub>15</sub> | 0110010          | 15  |          65       |
| X<sub>16</sub> | 0010101          | 15  |          55       |

Суммарная приспособленность в поколении: 554.

### Отбор сильнейших для скрещивания:

Особи с их приспособленностью: X<sub>8</sub>(77), X<sub>12</sub>(75), X<sub>6</sub>(73), X<sub>2</sub>(67)

### Скрещивание:

Скрещиваем особей X<sub>8</sub> и X<sub>12</sub>.

Точка разрыва: 4

Родители:

X<sub>8</sub>: 1110001

X<sub>12</sub>: 1101010

Потомки:

X<sub>17</sub>: 1110010, приспособленность = 67 (вес = 18)

X<sub>18</sub>: 1101001, приспособленность = 55 (вес = 14)

Проведем мутацию в X<sub>18</sub>. Заменим 1 бит на 0. Получаем 0101001, вес = 19, приспособленность = 73

Скрещиваем особей X<sub>6</sub> и X<sub>2</sub>:

Точка разрыва: 4

Родители:

X<sub>6</sub>: 0110101

X<sub>2</sub>: 0011010 

Потомки:

X<sub>19</sub>: 0110010, приспособленность = 55 (вес = 15)

X<sub>20</sub>: 0011101, приспособленность = 0 (так как вес = 23 > 20)

Проведем мутацию в X<sub>20</sub>. Заменим 3 бит на 0. Получаем 0001101, вес = 17, приспособленность = 63

В 4 поколение берем родителей и потомков. 

### Поколение 4

| № | Бинарный код                  | Вес | Приспособленность |
|---|:------------------------------|:----|:-----------------:|
| X<sub>2</sub>  | 0011010          | 19  |         67        |
| X<sub>6</sub>  | 0110101          | 19  |          73       |
| X<sub>8</sub>  | 1110001          | 20  |          77       |
| X<sub>12</sub> | 1101010          | 20  |          75       |
| X<sub>17</sub> | 1110010          | 18  |         67        |
| X<sub>18</sub> | 0101001          | 19  |          73       |
| X<sub>19</sub> | 0110010          | 15  |          55       |
| X<sub>20</sub> | 0001101          | 17  |          63       |

Суммарная приспособленность в поколении: 550.

Было сформировано 4 поколения. Алгоритм завершен. По сравнению с начальным поколением суммарная приспособленность выросла с 507 до 550, наблюдается эволюция. 

Самая сильная особь 4 поколения - X<sub>8</sub> с весом 20 и показателем приспособленности 77. Таким образом, можно сказать, что максимальная стоимость предметов - 77, с общим весом 20. Набор предметов, обеспечивающих максимальную стоимость: 1, 2, 3, 7. Свободного место в рюкзаке: 0. 

## Ответ: 

- Максимально возможная стоимость - 77

- Набор предметов: 1, 2, 3, 7

  1: стоимость 12, вес 3

  2: стоимость 18, вес 4

  3: стоимость 22, вес 6

  7: стоимость 25, вес 7

- Общий вес предметов: 20

- Свободное место в рюкзаке: 0