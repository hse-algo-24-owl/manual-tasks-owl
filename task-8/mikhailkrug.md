# Задание №8
## Вариант 10. Задача о назначениях. Венгерский алгоритм.

Дана матрица затрат для задач A, B, C, D, E и исполнителей 1, 2, 3, 4, 5:

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   14   |   11   |   8   |   14   |   **5**   |
| **B** |   12   |   8   |   6   |   8   |   **5**   |
| **C** |   15   |   12   |   9   |   11   |   **7**   |
| **D** |   11   |   12   |   **10**   |   15   |   15   |
| **E** |   13   |   10   |   8   |   14   |   **5**   |

**1.** Проведем редукцию матрицы затрат. Вычтем из каждой строки минимальное значение, представленное в этой строке.

|       | **1** | **2** | **3** | **4** | **5** | **Min** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   9   |   6   |   3   |   9   |   0   |   **-5**   |
| **B** |   7   |   3   |   1   |   **3**   |   0   |   **-5**   |
| **C** |   8   |   5   |   2   |   4   |   0   |   **-7**   |
| **D** |   **1**   |   **2**   |   0   |   5   |   5   |   **-10**   |
| **E** |   8   |   5   |   3   |   9   |   0   |   **-5**   |

После чего вычтем из каждого столбца минимальное значение, представленное в этом столбце.

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   8   |   4   |   3   |   6   |   0   |
| **B** |   6   |   1   |   1   |   0   |   0   |
| **C** |   7   |   3   |   2   |   1   |   0   |
| **D** |   0   |   0   |   0   |   2   |   5   |  
| **E** |   7   |   3   |   3   |   6   |   0   | 
| **Min** | **-1** | **-2** | **-** | **3** | **-** |

Получим редуцированную матрицу, где нули обозначают наименее затратные варианты назначений.

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   8   |   4   |   3   |   6   |   0   |
| **B** |   6   |   1   |   1   |   0   |   0   |
| **C** |   7   |   3   |   2   |   1   |   0   |
| **D** |   0   |   0   |   0   |   2   |   5   |  
| **E** |   7   |   3   |   3   |   6   |   0   | 

**2.** Построим двудольный граф, вынесем на него те ребра, для которых в редуцированной матрице указаны нули.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A --- 5
    B --- 4
    B --- 5
    C --- 5
    D --- 1
    D --- 2
    D --- 3
    E --- 5
```

Выберем произвольное паросочетание A --- 5, B --- 4 и D --- 1 и попытаемся построить совершенное паросочетание с помощью чередующихся деревьев.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A -.- 5
    B -.- 4
    B --- 5
    C --- 5
    D -.- 1
    D --- 2
    D --- 3
    E --- 5
```

Попытаемся построить дерево из оставшейся непокрытой вершины E.

```mermaid
graph LR
    E(E - 0 фр.)  --> 5(5 - 1 фр.) -.-> A(A - 2 фр.)
```

В построенном дереве нет цепей, чередующееся относительно текущего паросочетания, ветка закончились в покрытой вершине **А**, то есть в указанном графе нет совершенного паросочетания.

**3.** Поскольку чередующейся цепи нет, то необходимо применить диагональную редукцию.

Во множество X выпишем все **покрытые построенным деревом** вершины первой доли графа, во множество Y все **покрытые построенным деревом** вершины из второй доли графа.


X = \{A, E\}

Y = \{5 \}


Необходимо найти минимальный элемент из строк, включенных во множество X и столбцов, не включенных во множество Y. В нашем случае это будут строки A, E и столбцы 1, 2, 3, 4.
Минимальный элемент 3, вычтем найденное значение из строк множества X и прибавим к столбцам множества Y:


|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   *5*   |   *1*   |   **0**   |   *3*   |   *0*   |
| **B** |   6   |   1   |   1   |   0   |   *0*   |
| **C** |   7   |   3   |   2   |   1   |   *3*   |
| **D** |   0   |   0   |   0   |   2   |   *8*   |  
| **E** |   *4*   |   **0**   |   **0**   |   *3*   |   *3*   | 

В ячейах А4, E2 и E3 появились новые нулевые значения, добавим соответствующие ребра в двудольный граф.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A -.- 5
    B -.- 4
    D -.- 1
    D --- 2
    D --- 3
    E --- 5
    A --- 4
    E --- 2
    E --- 3
```
